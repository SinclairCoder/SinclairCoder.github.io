---
title: 基于奇异值分解的图像压缩     
date: 2019-09-09
author: SinclairWang
# img: 
top: false # 是否推荐
cover: false # 是否轮播
# password: 
toc: false
mathjax: true
# img: /source/images/xxx.jpg
tags:
    - 图像处理
categories:
	- 图像处理
---

## 理论：
矩阵的奇异值分解变换是一种正交变换，它可以将矩阵对角化
定理：
设A是一个秩为$r$的$m*n$矩阵,则存在正交矩阵$U$和$V$,使得
$$ U^TAV= \begin{bmatrix} \Sigma & 0 \\ 0 & 0 \\ \end{bmatrix} $$
其中$\Sigma=diag\{\sigma_1,\sigma_2,\sigma_3,....,\sigma_r\}$，这里$\sigma_1>=\sigma_2>=\sigma_3....>=\sigma_r$，
$\sigma_1^2....\sigma_r^2$是矩阵$A^TA$对应的特征值。
称$$ A=U \begin{bmatrix} \Sigma & 0 \\ 0 & 0 \\ \end{bmatrix}V^T$$A的奇异值分解，$\sigma_i(i=1,...r)$称为A的奇异值

根据自己的理解，压缩的思路就是先进行奇异值分解，将前k大个特征值保留下来，其余的变为0，然后进行逆变换，起到基本替代原来奇异值矩阵的作用，从而实现图像的压缩，压缩率也会随k的变化而变化，诚然，k越大，压缩率越小。

## 实现步骤：

- 读取RGB图像
- 将RGB图像变为灰度图像
- 奇异值分解
- 保留前k大个特征值
- 逆变换
- 计算压缩率
- 打印图像（保存）
- 修改k的值，重复以上步骤

## 实现：
```matlab
% 通过奇异值分解 进行图像压缩
clc;clear;
I = imread('figure1.jpg');  % rgb图像为274KB
[m,n,h] = size(I);
% Igray = rgb2gray(I);
% imwrite(Igray,'figure1grayByrgb2gray.png','png') % 灰度图像为993KB，文件变大了好几倍
% 参考别人的博客，手写将rgb图像变成灰度图像
for i=1:m
    for j=1:n
    Igray(i,j)=0.299*I(i,j,1)+0.587*I(i,j,2)+0.114*I(i,j,3);
    end
end
imwrite(Igray,'figure1grayBymyself.png','png') 
k = 20;
Igray = double(Igray);
[U,S,V] = svd(Igray);
S = diag(S); % 变成列向量
Smax = max(S);
Smin = min(S);
S1 = S;
S1(k:end)=0;  %保留前ｋ个
% S1 = diag(S1);  % 考虑不周到
if m>=n  % 对于非方图形
    S1 = [diag(S1);zeros(m-n,n)]; 
else S1 = [diag(S1),zeros(m,n-m)]; 
end
g = U*S1*V'; % S1的奇异值分解
g = uint8(g);
compressration = n^2/(k*(2*n+1));
subplot(1,2,1),imshow(mat2gray(Igray)),title('soure');
subplot(1,2,2),imshow(g),title(['k =',num2str(k),'  compress ratio =',num2str(compressration)]);
imwrite(g,'figure1Compress20.png','png')
figure,plot(S,'.','Color','k'); % 画出奇异值对应的点
```
- 原RGB图像：

![原RGB图像](https://img-blog.csdnimg.cn/20190909163243876.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1NpbmNsYWlyV2FuZw==,size_16,color_FFFFFF,t_70)

- 灰度图像

![灰度图像](https://img-blog.csdnimg.cn/2019090916334072.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1NpbmNsYWlyV2FuZw==,size_16,color_FFFFFF,t_70)

- 特征值分布

![特征值分布](https://img-blog.csdnimg.cn/20190909163642173.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1NpbmNsYWlyV2FuZw==,size_16,color_FFFFFF,t_70)

- K=20时的压缩率![K=20时的压缩率](https://img-blog.csdnimg.cn/20190909163802967.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1NpbmNsYWlyV2FuZw==,size_16,color_FFFFFF,t_70)

可以调节k的值得到不同的压缩率


## 参考博客：

[RGB图像转为灰度图像原理](https://blog.csdn.net/chaolei3/article/details/75716422)
[RGB转灰度的几种算法](https://www.cnblogs.com/zhangjiansheng/p/6925722.html)
[图像压缩（SVD方法）](https://blog.csdn.net/bluecol/article/details/45971423#commentsedit)